<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="HistoryStore is a simple trait for storing and retrieving history of block numbers."><title>HistoryStore in webb_relayer_store - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="webb_relayer_store" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (8a73f50d8 2023-03-11)" data-search-js="search-ab3e9174d42dd6c2.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" data-theme-light-css="light-db279b6232be9c13.css" data-theme-dark-css="dark-cf923f49f397b216.css" data-theme-ayu-css="ayu-be46fdc453a55015.css" ></div><script src="../static.files/storage-9184409068f70b79.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-f5a2577c5297a973.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../webb_relayer_store/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../webb_relayer_store/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">HistoryStore</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.get_last_block_number">get_last_block_number</a></li><li><a href="#tymethod.get_target_block_number">get_target_block_number</a></li><li><a href="#tymethod.set_last_block_number">set_last_block_number</a></li><li><a href="#tymethod.set_target_block_number">set_target_block_number</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.get_last_block_number_or_default">get_last_block_number_or_default</a></li><li><a href="#method.get_target_block_number_or_default">get_target_block_number_or_default</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In webb_relayer_store</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">webb_relayer_store</a>::<wbr><a class="trait" href="#">HistoryStore</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/webb_relayer_store/lib.rs.html#198-244">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait HistoryStore: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> {
    // Required methods
    fn <a href="#tymethod.set_last_block_number" class="fn">set_last_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
        &amp;self,
        key: K,
        block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
    ) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_last_block_number" class="fn">get_last_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
        &amp;self,
        key: K,
        default_block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
    ) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.set_target_block_number" class="fn">set_target_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
        &amp;self,
        key: K,
        block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
    ) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_target_block_number" class="fn">get_target_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
        &amp;self,
        key: K,
        default_block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
    ) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;;

    // Provided methods
    fn <a href="#method.get_last_block_number_or_default" class="fn">get_last_block_number_or_default</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
        &amp;self,
        key: K
    ) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.get_target_block_number_or_default" class="fn">get_target_block_number_or_default</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
        &amp;self,
        key: K
    ) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>HistoryStore is a simple trait for storing and retrieving history
of block numbers.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.set_last_block_number" class="method"><a class="srclink rightside" href="../src/webb_relayer_store/lib.rs.html#200-204">source</a><h4 class="code-header">fn <a href="#tymethod.set_last_block_number" class="fn">set_last_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
    &amp;self,
    key: K,
    block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>Sets the new block number for that contract in the cache and returns the old one.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_last_block_number" class="method"><a class="srclink rightside" href="../src/webb_relayer_store/lib.rs.html#207-211">source</a><h4 class="code-header">fn <a href="#tymethod.get_last_block_number" class="fn">get_last_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
    &amp;self,
    key: K,
    default_block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>Get the last block number for that contract.
if not found, returns the <code>default_block_number</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.set_target_block_number" class="method"><a class="srclink rightside" href="../src/webb_relayer_store/lib.rs.html#224-228">source</a><h4 class="code-header">fn <a href="#tymethod.set_target_block_number" class="fn">set_target_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
    &amp;self,
    key: K,
    block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>Sets the Target Block number (Usually the latest block number of the target chain)
This used to be able to check if we are fully synced with the target chain or not.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_target_block_number" class="method"><a class="srclink rightside" href="../src/webb_relayer_store/lib.rs.html#231-235">source</a><h4 class="code-header">fn <a href="#tymethod.get_target_block_number" class="fn">get_target_block_number</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
    &amp;self,
    key: K,
    default_block_number: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>
) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>Get the target block number.
if not found, returns the <code>default_block_number</code>.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.get_last_block_number_or_default" class="method"><a class="srclink rightside" href="../src/webb_relayer_store/lib.rs.html#215-220">source</a><h4 class="code-header">fn <a href="#method.get_last_block_number_or_default" class="fn">get_last_block_number_or_default</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
    &amp;self,
    key: K
) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>an easy way to call the <code>get_last_block_number</code>
where the default block number is <code>1</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_target_block_number_or_default" class="method"><a class="srclink rightside" href="../src/webb_relayer_store/lib.rs.html#238-243">source</a><h4 class="code-header">fn <a href="#method.get_target_block_number_or_default" class="fn">get_target_block_number_or_default</a>&lt;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.HistoryStoreKey.html" title="enum webb_relayer_store::HistoryStoreKey">HistoryStoreKey</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt;(
    &amp;self,
    key: K
) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock"><p>an easy way to call the <code>get_target_block_number</code>.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-HistoryStore-for-InMemoryStore" class="impl"><a class="srclink rightside" href="../src/webb_relayer_store/mem.rs.html#51-112">source</a><a href="#impl-HistoryStore-for-InMemoryStore" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.HistoryStore.html" title="trait webb_relayer_store::HistoryStore">HistoryStore</a> for <a class="struct" href="mem/struct.InMemoryStore.html" title="struct webb_relayer_store::mem::InMemoryStore">InMemoryStore</a></h3></section><section id="impl-HistoryStore-for-SledStore" class="impl"><a class="srclink rightside" href="../src/webb_relayer_store/sled.rs.html#63-141">source</a><a href="#impl-HistoryStore-for-SledStore" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.HistoryStore.html" title="trait webb_relayer_store::HistoryStore">HistoryStore</a> for <a class="struct" href="sled/struct.SledStore.html" title="struct webb_relayer_store::sled::SledStore">SledStore</a></h3></section></div><script src="../implementors/webb_relayer_store/trait.HistoryStore.js" async></script></section></div></main></body></html>